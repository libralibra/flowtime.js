<!DOCTYPE HTML>
<!--[if IE 6]>
<html id="ie6" lang="en-US" class="ie ie6 lt-ie9">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US" class="ie ie7 lt-ie9">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US" class="ie ie8 lt-ie9">
<![endif]-->
<!--[if gte IE 9]>
<html lang="en-US" class="ie ie9">
<![endif]-->
<!--[if !(IE)]><!-->
<html lang="en-US" class="">
    <!--<![endif]-->

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="initial-scale=1.0 minimal-ui">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="author" content="Daniel (Xu Zhang)">
        <meta property="og:title" content="Daniel's Projects @ University of Southampton Rolls-Royce UTC">
        <meta name="description"
            content="This slides demonstrates my participated projects since I joined the Rolls-Royce UTC at the University of Southampton.">

        <title>Daniel's Research Projects @ UoS RR UTC</title>

        <link rel="stylesheet" href="../assets/css/reset.css">
        <link rel="stylesheet" href="../assets/css/flowtime.css">
        <link rel="stylesheet" href="../assets/css/theme.css">
        <link rel="stylesheet" href="../assets/css/prism.css">
        <link rel="stylesheet" href="../assets/css/titlebar.css">
        <link rel="stylesheet" href="../assets/css/progress.css">
    </head>

    <body class="page-body">
        <div class="flowtime">
            <div class="ft-section" data-id="section-1">
                <div id="/section-1/page-1" class="ft-page" data-id="page-1" data-title="Home Page">
                    <div align="center">
                        <p></p>
                        <img src="img/project1.png">
                        <p class="page-title">Daniel (<a href="http://www.southampton.ac.uk/~xz5f11/" target="_blank">Xu
                                Zhang</a>)'s Research Projects <br>
                            @ University of Southampton <br>
                            Rolls-Royce UTC</p>
                        <p>version: 202306</p>
                    </div>
                </div>
                <div id="/section-1/page-2" class="ft-page" data-id="page-2" data-title="Overview">
                    <h2><strong>Overview</strong></h2>
                    <p>Since joining the Rolls-Royce UTC at the University of Southampton, I have been working on
                        several successful projects which include:</p>
                    <dl>
                        <dt><strong>Prometheus</strong> (Rolls-Royce code name: CD99)</dt>
                        <dd>A Geometry-centric Combustor Design and Optimisation Platform<strong> (ongoing)</strong>
                        </dd>

                        <dt><strong>DYNAMO</strong></dt>
                        <dd>A Smart System for Thermal Analysis of Combustor<strong> (finished)</strong></dd>

                        <dt><strong>Tile Optimisation</strong></dt>
                        <dd>A Pedestal Tile Cooling Feed Hole Configuration Optimisation Package<strong>
                                (finished)</strong></dd>

                        <dt><strong>GEMNiDS</strong></dt>
                        <dd>Hot-2-Cold Mesh Transformation<strong> (finish soon)</strong></dd>

                        <dt><strong>After-burner Integration into CD99</strong></dt>
                        <dd>Version 2 of CD99 that shifts the flexibility to users rather than using hard-coded
                            rules<strong>(finished)</strong></dd>

                        <dt><strong>COLIBRI</strong></dt>
                        <dd>Artificial Intelligence (AI)-enabled design & optimisation<strong> (ongoing)</strong></dd>
                    </dl>

                </div>
            </div>
            <div class="ft-section" data-id="section-2">
                <div id="/section-2/page-1" class="ft-page" data-id="page-1" data-title="PROMETHEUS">
                    <h1><strong>PROMETHEUS</strong></h1>
                    <p>A multi-disciplinary combustor design optimisation system which aims to:</p>
                    <ul>
                        <li>builds upon the existing Rolls-Royce combustor sketchbook system</li>
                        <li>utilises the existing software tools and best practice within the Rolls-Royce combustor
                            design team</li>
                        <li>enables automatic sizing of the combustor geometry based on PreDiCT outputs</li>
                        <li>manipulates sketchbook geometry in both interactive and batch modes</li>
                        <li>enables automatic pre-processing of geometry for a variety of simulations</li>
                        <li>creates meshing, simulation and post-processing scripts automatically</li>
                        <li>enables efficient & automated combustor design optimisations</li>
                    </ul>
                    <h4>Development toolset: <strong>C/C++, Siemens NXOpen API, XML</strong></h4>
                </div>
                <div id="/section-2/page-2" class="ft-page" data-id="page-2" data-title="System Overview">
                    <h1><strong>A Geometry-Centric Approach</strong></h1>
                    <div align="center">
                        Tranditional Optimisation Workflow
                        <img src="img/opt1.png" width="70%"><br>
                        <span class="ft-fragment">
                            Prometheus Optimisation Workflow
                            <img class="ft-fragment" src="img/opt2.png" width="70%">
                        </span>
                    </div>
                </div>
                <div id="/section-2/page-3" class="ft-page" data-id="page-3" data-title="Workflow">
                    <h1><strong>Workflow</strong></h1>
                    <div align="center">
                        <img src="img/workflow.png" width="60%"><br>
                        [1] Zhang, Xu. <dfn>et al.</dfn>, “Prometheus: a geometry-centric optimisation system for
                        combustor design”, ASME Turbo Expo 2014.
                    </div>
                </div>
            </div>
            <div class="ft-section" data-id="section-3">
                <div id="/section-3/page-1" class="ft-page" data-id="page-1" data-title="DYNAMO">
                    <h1><strong>DYNAMO</strong></h1>
                    <p>DYNAMO(<strong>D</strong>esign methods for durabilit<strong>Y</strong> a<strong>N</strong>d
                        oper<strong>A</strong>bility of low e<strong>M</strong>mision c<strong>O</strong>mbustor), as a
                        part of the European <strong>CleanSky</strong> project, aims to extend the capabilities of the
                        Prometheus system on a number of fronts.</p>
                    <ul>
                        <li>Aero-thermal network generation (Flownet)</li>
                        <li>CFD capability for lean burn combustor</li>
                        <li>New Finite Element Analysis (FEA) capability</li>
                        <li>Links from Siemens NX to Rolls-Royce SC03</li>
                        <li>Respects all boundary conditions and mesh settings</li>
                        <li>Automated joints/mesh paring, sectoring, meshing, and journal definitions</li>
                        <li>Impingement effusion tile simulation integration</li>
                    </ul>
                </div>
                <div id="/section-3/page-2" class="ft-page" data-id="page-2" data-title="DIET">
                    <h1><strong>DIET Integration</strong></h1>
                    <div align="center" class="stack">
                        <p class="ft-fragment"><strong>D</strong>igital <strong>I</strong>mpingement
                            <strong>E</strong>ffusion <strong>T</strong>ile (DIET) network generation has been
                            implemented in Prometheus. With new added XML tags, user can now guides Prometheus to
                            generate complicated Flownet networks for IE tiles.</p>
                        <div class="ft-fragment stacked shy"><br /><br /><br />System Overview<img src="img/DIET_1.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy"><br /><br /><br />DIET Integration<img src="img/DIET_2.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy"><br /><br /><br />Prometheus Guided DIET Network<img
                                src="img/DIET_3.png" style="width:800px;height:550px;"></div>
                    </div>
                </div>
                <div id="/section-3/page-3" class="ft-page" data-id="page-3" data-title="Showcases">
                    <h1><strong>Prometheus Showcases</strong></h1>
                    <div class="stack" align="center">
                        <!-- force all image to be 600px, stacked at same position (don't flow bottom), shy makes it disappear -->
                        <div class="ft-fragment stacked shy">ENTAPS Mesh<img src="img/EN_mesh.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">ENTAPS CFD<img src="img/EN_verlocity.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">RB3036 Fluid Volume<img src="img/RB3036_Vol_Fluid.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">RB3036 Flownet<img src="img/RB3036_Vol_Flownet.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn Fluid Volume<img
                                src="img/Lean_Burn_Rear_Test.png" style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn Mesh<img src="img/LB_Mesh.jpg"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn CFD<img src="img/LB_CFD.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Zeppelin Fluid Volume<img
                                src="img/Zeppelin_Fluid_Vol_t1.png" style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Zeppelin Mesh<img src="img/Zeppelin_3_1.jpg"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Zeppelin CFD<img src="img/zeppelin_cfd_2.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">XWB Perspex Rig<img src="img/XWB_Goem.png"
                                style="width:800px;height:550px;">Zhang, X. <dfn>et al.</dfn>, “Isothermal Combustor
                            Prediffuser & Fuel Injector Feed Arm Design Optimization Using the Prometheus Design
                            System”, J. Eng. Gas Turbines Power, (2015)</div>
                        <div class="ft-fragment stacked shy">XWB Single Sector Fluid Volume<img
                                src="img/XWB_Vol_Sec1.png" style="width:800px;height:550px;">Zhang, X. <dfn>et
                                al.</dfn>, “Isothermal Combustor Prediffuser & Fuel Injector Feed Arm Design
                            Optimization Using the Prometheus Design System”, J. Eng. Gas Turbines Power, (2015)</div>
                        <div class="ft-fragment stacked shy">XWB Double Sector Fluid Volume<img
                                src="img/XWB_Vol_Sec2.png" style="width:800px;height:550px;">Zhang, X. <dfn>et
                                al.</dfn>, “Isothermal Combustor Prediffuser & Fuel Injector Feed Arm Design
                            Optimization Using the Prometheus Design System”, J. Eng. Gas Turbines Power, (2015)</div>
                        <div class="ft-fragment stacked shy">XWB Mesh Details<img src="img/XWB_60m_mesh.jpg"
                                style="width:800px;height:550px;">Zhang, X. <dfn>et al.</dfn>, “Isothermal Combustor
                            Prediffuser & Fuel Injector Feed Arm Design Optimization Using the Prometheus Design
                            System”, J. Eng. Gas Turbines Power, (2015)</div>
                        <div class="ft-fragment stacked shy">XWB CFD<img src="img/XWB_CFD.png"
                                style="width:800px;height:550px;">Zhang, X. <dfn>et al.</dfn>, “Isothermal Combustor
                            Prediffuser & Fuel Injector Feed Arm Design Optimization Using the Prometheus Design
                            System”, J. Eng. Gas Turbines Power, (2015)<br><strong>Pressure drop improvements: >14% in
                                inner annulus & >19% in outer annulus</strong></div>
                        <div class="ft-fragment stacked shy">Logi Whole Engine FEA Mesh<img
                                src="img/LeanBurnFull_Prometheus_1.png" style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Logi Whole Engine SC03 Model<img
                                src="img/test_LeanburnFull_1.png" style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn Sector FEA Mesh<img src="img/LB_NX_Mesh.png"
                                style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn Sector SC03 Model<img
                                src="img/LB_SC03_Sector.png" style="width:800px;height:550px;"></div>
                        <div class="ft-fragment stacked shy">Lean Burn Sector SC03 Model with DIET<img
                                src="img/DIET_4.png" style="width:800px;height:550px;"></div>
                    </div>
                </div>
                <div id="/section-3/page-4" class="ft-page" data-id="page-4" data-title="Capabilities & Applications">
                    <h1><strong>Prometheus Capabilities</strong></h1>
                    <ul>
                        <li>Integrated platform for aerodynamics, aero-thermal, thermal-acoustic, thermal-mechanical,
                            CFD, and cost analysis</li>
                        <li>Automatic creation of simulation scripts for meshing, CFD, thermal, and post-processing</li>
                        <li>Best-practice and designer knowledge embedding</li>
                        <li>v2.0 is more flexible and user-friendly</li>
                    </ul>
                    <h1><strong>Applications</strong></h1>
                    <ul>
                        <li>Part of combustor Gas Path Design System (<strong>GPDS</strong>)</li>
                        <li>Deployed globally including <strong>Derby, Bristol, Bangalore, Dahlewits, and
                                Indianapolis</strong></li>
                        <li>Used in a number of engine designs (<strong>ENTAPS, RB3036, RB3039, RB3049, RB3056, BR700G,
                                Trent 1000 Tile, NUSKU FSN, Trent XWB, Advanced 1, etc.</strong>)</li>
                    </ul>
                </div>
            </div>
            <div class="ft-section" data-id="section-4">
                <div id="/section-4/page-1" class="ft-page" data-id="page-1" data-title="Tile Optimisation">
                    <h1><strong>Pedestal Tile Feedhole Optimisation</strong></h1>
                    <p>To develop an automated package to optimise a pedestal tile feedhole configuration to minimise
                        total mass flow by employing a surrogate modelling based approach while respecting ligament size
                        and thermal temperature constraints.</p>
                    <h4>Toolset:</h4>
                    <ul>
                        <li>Python (shipped with SS02) & standard batch script</li>
                        <li>Matlab (utilises the Rolls-Royce in-house optimisation software OPTIMAT developed by
                            Southampton UTC)</li>
                        <li>CD13 & SC03 (Flownet network, massflow, item generation, thermal simulation)</li>
                        <li>ESE (Engineering Software Environment)</li>
                    </ul>
                    <p><strong>* Follows Rolls-Royce scripting best practice</strong></p>
                </div>
                <div id="/section-4/page-2" class="ft-page" data-id="page-2" data-title="The Package">
                    <h1><strong>Optimisation Package</strong></h1>
                    <p>The tile optimisation package includes:</p>
                    <ul>
                        <li><strong>Tile workflow</strong>: to automatically evaluate a specific feed hole configuration
                        </li>
                        <li><strong>Optimisation routine</strong>: to explore the design space to search for the optimal
                            solutions using the tile workflow</li>
                    </ul>
                    <br>
                    <div align="center">
                        <img src="img/tile_opt_1.png">
                    </div>
                </div>
                <div id="/section-4/page-3" class="ft-page" data-id="page-3" data-title="Examples">
                    <h1><strong>Workflow</strong></h1>
                    <div class="stack" align="center">
                        <!-- force all image to be 600px, stacked at same position (don't flow bottom), shy makes it disapear -->
                        <div class="ft-fragment stacked shy">
                            Tile Workflow
                            <img src="img/tile_opt_2.png" style="width:90%;height:80%;">
                        </div>
                        <div class="ft-fragment stacked shy">
                            Running Mode + <strong>OPTIMAT jobManager</strong>
                            <img src="img/tile_opt_3.png" style="width:85%;height:70%;">
                        </div>
                        <div class="ft-fragment stacked shy">
                            Optimisation
                            <img src="img/tile_opt_4.png" style="height:80%;">
                        </div>
                    </div>
                </div>
                <div id="/section-4/page-4" class="ft-page" data-id="page-4" data-title="Results">
                    <h1><strong>Results</strong></h1>
                    <div class="stack" align="center">
                        <!-- force all image to be 600px, stacked at same position (don't flow bottom), shy makes it disapear -->
                        <div class="ft-fragment stacked shy">
                            IB1 Rig Test
                            <img src="img/tile_ib1.png" style="max-width: 75%;">
                        </div>
                        <div class="ft-fragment stacked shy">
                            IB2 Rig Test
                            <img src="img/tile_ib2.png" style="max-width: 60%;">
                        </div>
                        <div class="ft-fragment stacked shy">
                            IB3 Rig Test
                            <img src="img/tile_ib3.png" style="max-width: 55%;">
                        </div>
                    </div>
                </div>
                <div id="/section-4/page-5" class="ft-page" data-id="page-5" data-title="Current Status">
                    <h1><strong>Current Status</strong></h1>
                    <p>This tools has been delivered to and used by Rolls-Royce Derby team.</p>

                    <ul>
                        <li>Liner for XWB-84EP has been designed using this tool (all 8 bays of the combustor & igniter
                            bays)</li>
                        <li>Two combustors have been manufactured based on these designs</li>
                        <li>Predictions show a significant cooling flow reduction with tile temperatures & stresses
                            remaining within limits</li>
                    </ul>

                    <p><strong>* Although it was developed for pedestal tiles, this package can be applied to all types
                            of tile design optimisations.</strong></p>
                </div>
            </div>
            <div class="ft-section" data-id="section-5">
                <div id="/section-5/page-1" class="ft-page" data-id="page-1" data-title="Hot-2-Cold">
                    <h1><strong>Hot-2-Cold Mesh Transformation - part of GEMINiDS</strong></h1>
                    <p>The aim of this project is to morph a CFD mesh by empoying displacements calculated as a result
                        of a FEA simulation.</p>

                    <h2>Morph CFD <dfn>vs.</dfn> Morph CAD</h2>

                    <ul>
                        <li>No need to re-visit CAD as CFD and FEA have been generated already</li>
                        <li>Can be applied to other combustor components without modification</li>
                        <li>FEA has been solved in design process, why not use it directly?</li>
                    </ul>
                </div>
                <div id="/section-5/page-2" class="ft-page" data-id="page-2" data-title="The Concept">
                    <h1><strong>The Concept</strong></h1>
                    <div align="center">
                        The Mesh Transformation Workflow (top) and Detailed Tetrahedron Interpolation Process (bottom)
                        <img src="img/hot2cold_1.png" style="max-height: 95%;">
                    </div>
                </div>
                <div id="/section-5/page-3" class="ft-page" data-id="page-3" data-title="Matlab Approach">
                    <h1><strong>Matlab Demo</strong></h1>
                    <p>Proof-of-concept implementation has been developed using Matlab.
                        <button id="myBtn">Restart</button>
                    </p>
                    <div class="ft-fragment" align="center"><img id="demo" src="img/hot2cold_matlab.gif"
                            style="max-width: 50%;"></div>
                </div>
                <div id="/section-5/page-4" class="ft-page" data-id="page-4" data-title="k-D Tree Approach">
                    <h1><strong><dfn>k</dfn> -D Tree Approach</strong></h1>
                    <p>The Matlab implementation worked. However, the performance is poor on large dataset. It uses
                        Mathworks' proprietary function (<code><strong>pointLocation</strong></code>).</p>
                    <p>New implementation in C++ uses the <dfn>k</dfn> -D tree approach to map CFD nodes to FEA
                        tetrahedrons. Significant performance improvement has been obtained.</p>
                    <div class="ft-fragment" align="center"><img src="img/hot2cold_3.png"
                            style="width:1000px;height:200px;"></div>
                    <p class="ft-fragment"><strong>The package has been delivered to Rolls-Royce to be applied on
                            various geometry test cases.</strong></p>
                </div>
                <div id="/section-5/page-5" class="ft-page" data-id="page-5" data-title="Applications">
                    <h1><strong>Applications</strong></h1>
                    <p>This approach could be potentially applied to:</p>
                    <ul>
                        <li>Cold-to-hot/hot-to-cold geometry morphing</li>
                        <li>Rapid assessment of combustor concessions</li>
                        <li>Geometry morphing based on measurement scans</li>
                        <li>Robustness assessment of engine components and sub-systems</li>
                    </ul>
                </div>
            </div>
            <div class="ft-section" data-id="section-6">
                <div id="/section-6/page-1" class="ft-page" data-id="page-1" data-title="Exhaust">
                    <h1><strong>After-burner Integration to CD99</strong></h1>
                    <h2><strong>Motivation</strong></h2>
                    <p>This project aims to extend the capabilities of CD99 to after-burner geometries. The version 2 of
                        CD99 has shiftted the selection of feature identification rule combinations from the system to
                        the user. It improved CD99's flexibility significantly without hard-coding the rules for dealing
                        with features that CD99 never saw before. </p>
                    <h3>Key achivements:</h3>
                    <ul>
                        <li>New CD99 v2 XML syntax (free combinations of pre-defined rules)</li>
                        <li>Nested XML action file (calling another XML action file without depth limitation)</li>
                        <li>Cascading global variable definition (XML, ASCII file, Flownet results, Microsoft
                            spreadsheet, etc...)</li>
                        <li>LEGO-style workflow construction (simplified XML code blocks)</li>
                    </ul>
                    <h3><strong>This work has won the Rolls-Royce Defence “Pioneering Digital Award” at the end of
                            2020.</strong></h3>
                </div>
            </div>
            <div class="ft-section" data-id="section-7">
                <div id="/section-7/page-1" class="ft-page" data-id="page-1" data-title="Colibri">
                    <h1><strong>COLIBRI</strong></h1>
                    <h2><strong>Aim</strong></h2>
                    <p>The working package 4 (WP4) of COLIBRI project aims to investigate the AI/ML related techniques
                        for geometry reasoning, classification, completion, and/or generation, especially in 3D space.
                    </p>
                    <p>It involves the use of:</p>
                    <ul>
                        <li>MATLAB (Deep Learning toolbox)</li>
                        <li>Python (PyTorch)</li>
                        <li>Artificial Neural Network (ANN)</li>
                        <li>Convolutional Neural Network (CNN)</li>
                        <li>Conditional Generative Adversarial Network (CGAN)</li>
                    </ul>
                </div>
                <div id="/section-7/page-2" class="ft-page" data-id="page-2" data-title="NN2d">
                    <h1><strong>2D CGAN+CNN/ANN</strong></h1>
                    <p>This work can predict the pressure field map around a specific design of aerofoil using a
                        pre-trained CGAN in combination of ANN/CNN models.</p>
                    <ul>
                        <li>About 500,000 aerofoil pressure field images as training dataset</li>
                        <li>Train the CGAN to generate synthesis images</li>
                        <li>Train CNN using the same dataset</li>
                        <li>Train ANN using the decoded design variables, noises, and target value (MO loss)</li>
                        <li>Make predictions using the trained CNN/ANN</li>
                        <li>Validate the CNN/ANN predictions using real CFD results</li>
                    </ul>
                    <p>Prediction accuracy against real CFD:</p>
                    <ul>
                        <li>CGAN+CNN: <strong>&gt; 92.50%</strong></li>
                        <li>CGAN+ANN: <strong>&gt; 96.86%</strong></li>
                    </ul>
                </div>
                <div id="/section-7/page-3" class="ft-page" data-id="page-3" data-title="NN3d">
                    <h1><strong>3D Octree-based Approach</strong></h1>
                    <p>3D data are more resourse consuming than 2D data so than it won't work well by simply extending
                        the same approach from 2D to 3D models.</p>
                    <p>Various approaches of representing 3D data have been proposed:</p>
                    <ul>
                        <li class="ft-fragment">Voxel - similar to pixel in 2D image</li>
                        <li class="ft-fragment">Point Cloud</li>
                        <li class="ft-fragment">Sparse shape</li>
                        <li class="ft-fragment"><strong>Octree</strong></li>
                    </ul>
                </div>
            </div>
            <div class="ft-section" data-id="section-100">
                <div id="/section-100/page-1" class="ft-page" data-id="page-1" data-title="Questions">
                    <div align="center">
                        <p>&nbsp;&nbsp;</p>
                        <img src="img/questions.png"><br>
                        <h1 align="center"><strong>Questions?</strong></h1>
                        <h3><a href="mailto:xu.zhang@soton.ac.uk">Xu.Zhang@soton.ac.uk</a></h3>
                        <h4>Office hour: <strong>Monday, 13.00-15.00</strong><br>
                            R5017/B176, Boldrewood Campus</h4>
                    </div>
                </div>
            </div>
        </div>

        <!-- add the title bar -->
        <div class="titles">
            <div class="title-prev"></div>
            <div class="title-progress"></div>
            <div class="title-next"></div>
        </div>

        <!-- add the progress bar at the bottom -->
        <div class="progress-bar"></div>

        <script src="../assets/js/brav1toolbox.js"></script>
        <script src="../assets/js/flowtime.js"></script>
        <script src="../assets/js/prism.js"></script>

        <!-- add zoom in support, modified to work only with ALT pressed -->
        <script src="../assets/js/zoom.js"></script>
        <script>
            var zoomElement = document.querySelector('.page-body');
            if (zoomElement) {
                zoomElement.addEventListener('mousedown', function (event) {
                    var defaultModifier = /Linux/.test(window.navigator.platform) ? 'ctrl' : 'alt';
                    var modifier = defaultModifier + 'Key';
                    var zoomLevel = 2;
                    if (event[modifier]) {
                        event.preventDefault();
                        zoom.to({
                            x: event.clientX,
                            y: event.clientY,
                            scale: zoomLevel,
                            pan: false
                        });
                    }
                });
            }
        </script>
        <!-- add zoom in support, modified to work only with ALT pressed -->

        <!-- reset gif -->
        <script>
            document.getElementById("myBtn").addEventListener("click", function () {
                document.getElementById("demo").src = document.getElementById("demo").src;
            }); 
        </script>
        <!-- reset gif -->

        <script type="text/javascript">
            var cacheTitle = document.title.replace("Flowtime.js | ", "");
            var _gaq = _gaq || [];
            //_gaq.push(['_setAccount', 'UA-1228618-10']);
            _gaq.push(['_trackPageview']);
            _gaq.push(['_trackEvent', 'Flowtime', 'Landing', document.title]);

            // Configuration API test
            Flowtime.showProgress(true);
            // set the following 2 to false, it will prevent all steps on a previous page to be shown if we 
            // nevigate backwards. It will like we proceed to that page use DOWN arrow key for the first time.
            Flowtime.fragmentsOnSide(false);
            Flowtime.fragmentsOnBack(false);
            // show all page in browser's history 
            // Flowtime.useHistory(false);
            // Flowtime.slideInPx(true);
            // Flowtime.sectionsSlideToTop(true);
            // Flowtime.backFromPageToTop(true);
            // Flowtime.gridNavigation(false);
            // Flowtime.useOverviewVariant(true);
            Flowtime.parallaxInPx(true);

            // ===for using title panel, Daniel ===
            var prevTitle = document.querySelector(".title-prev");
            var nextTitle = document.querySelector(".title-next");
            var progTitle = document.querySelector(".title-progress");

            // set up progress bar
            var progBar = document.querySelector(".progress-bar")
            progBar.setAttribute('aria-valuemin', 0);
            progBar.setAttribute('aria-valuemax', 100);

            prevTitle.addEventListener("click", Flowtime.prev, false);
            nextTitle.addEventListener("click", Flowtime.next, false);
            Flowtime.addEventListener("flowtimenavigation", onNavigation, false);

            function onNavigation(e) {
                var prevPage = Flowtime.getPrevPage();
                var nextPage = Flowtime.getNextPage();
                if (prevPage === null) {
                    prevTitle.innerHTML = "&nbsp;";
                } else {
                    prevTitle.innerHTML = "&lt; " + prevPage.getAttribute("data-title");
                }
                if (nextPage === null) {
                    nextTitle.innerHTML = "";
                } else {
                    nextTitle.innerHTML = nextPage.getAttribute("data-title") + " &gt;";
                }
                // add progress to title bar
                progTitle.innerHTML = (e.progress == 0 ? "1" : e.progress) + "/" + e.total;

                // update the progress
                const progress = Math.floor(e.progress / e.total * 100);
                progBar.style.width = `${progress}%`;
                progBar.setAttribute('aria-valuenow', progress);
                progBar.setAttribute('aria-valuetext', `Slideshow progress: ${progress}%`);

                // log
                console.log(progress);
                console.log(progTitle.innerHTML);
            }
            // ===for using title panel===

            /*
              // for not using title panel event management
              Flowtime.onNavigation(onNavigation);
              function onNavigation(e)
              {
                  _gaq.push(['_trackEvent', 'Flowtime', 'Navigation', cacheTitle + ' > ' + document.title.replace("Flowtime.js | ", "")]);
                  // console.log(cacheTitle + ' > ' + document.title.replace("Flowtime.js | ", ""));
                  cacheTitle = document.title.replace("Flowtime.js | ", "");
                  //console.log('section', e.section, 'sectionIndex', e.sectionIndex);
                  //console.log('page', e.page, 'pageIndex', e.pageIndex);
                  //console.log('pastSectionIndex', e.pastSectionIndex, 'pastPageIndex', e.pastPageIndex);
                  //console.log('prevSection', e.prevSection);
                  //console.log('nextSection', e.nextSection);
                  //console.log('prevPage', e.prevPage);
                  //console.log('nextPage', e.nextPage);
                  //console.log('fragment', e.fragment, + 'fragmentIndex', e.fragmentIndex);
                  //console.log("isOverview", e.isOverview);
                  //console.log('progress:', e.progress, 'total:', e.total);
                  //var value = Math.round(e.progress * 100 / e.total);
                  //console.log('Completion: ' + value + '%');
              }*/

            // starts the application with configuration options
            Flowtime.start();
        </script>
    </body>

</html>